<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Web GUI</title>
    <link href="static/tailwind.css" rel="stylesheet" />

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="/static/render.js" defer></script>
    <script src="/static/progress.js" defer></script>
    <script src="/static/handlers.js" defer></script>
    <script src="/static/init.js" defer></script>
  </head>
  <body class="bg-gray-100 text-gray-800 min-h-screen p-6">

    <!-- ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div class="flex justify-end mb-6 relative">
      <button id="settingsBtn" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">
        ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
      </button>
      <ul
        id="settingsMenu"
        class="hidden absolute right-0 mt-2 w-48 bg-white rounded shadow-lg z-10"
      >
        <li>
          <button
            type="submit"
            form="index-form"
            class="block w-full px-4 py-2 text-green-600 hover:bg-gray-100"
          >
            –ü—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å
          </button>
        </li>
      </ul>
    </div>

    <!-- üîç –ü–æ–∏—Å–∫ -->
    <form id="search-form" class="mb-6" method="POST" action="/">
      <div class="flex flex-col sm:flex-row gap-3 items-center">
        <!-- Search input -->
        <input
          type="text"
          name="query"
          class="flex-1 px-3 py-2 border border-gray-300 rounded w-full sm:w-auto"
          placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–∏—Å–∫–∞"
        />
        <!-- Choose box -->
        <select
          name="search_type"
          class="px-3 py-2 border border-gray-300 rounded w-full sm:w-auto"
        >
          <option value="UNP">–£–ù–ü</option>
          <option value="KO">–£—á–µ—Ç–Ω—ã–π –Ω–æ–º–µ—Ä –ö–û</option>
          <option value="ContractNumber">–ù–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞</option>
          <option value="NAME">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</option>
        </select>
        <!-- Submit button -->
        <button
          type="submit"
          class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"
        >
          üîç –ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫
        </button>
      </div>
    </form>

    <div class="mb-4">
      <label for="accuracy" class="block text-sm font-medium text-gray-700">
        üéØ –¢–æ—á–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞: <span id="accuracy-value">100%</span>
      </label>
      <input
        type="range"
        id="accuracy"
        min="80"
        max="100"
        value="100"
        class="w-full sm:w-64 mt-1"
        oninput="updateAccuracyValue(this.value)"
      />
    </div>

    <!-- üìÑ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ -->
    <section class="mb-8">
      <h2 class="text-md font-semibold text-gray-700 mb-2">
        üìÑ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ —Å –∑–∞–ø—Ä–æ—Å–∞–º–∏
      </h2>
      <form
        id="upload-form"
        class="w-full bg-white rounded-lg border border-gray-300 shadow-sm p-4 space-y-4"
      >
        <div
          id="dropzone"
          class="relative border-2 border-dashed border-blue-300 rounded-lg p-6 text-center cursor-pointer bg-blue-50 hover:bg-blue-100 transition"
        >
          <input
            type="file"
            id="query_file"
            name="query_file"
            accept=".txt"
            class="absolute inset-0 opacity-0 cursor-pointer w-full h-full z-10"
          />
          <p id="fileLabel" class="text-sm text-gray-600">
            –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏
            <span class="text-blue-600 font-medium underline">–≤—ã–±–µ—Ä–∏—Ç–µ</span>
            –≤—Ä—É—á–Ω—É—é (.txt)
          </p>
        </div>
        <div class="flex justify-between items-center">
          <span
            id="selectedFile"
            class="text-sm text-gray-700 italic truncate max-w-[60%]"
          ></span>
          <button
            type="submit"
            id="uploadBtn"
            class="px-4 py-2 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 transition disabled:opacity-50"
            disabled
          >
            üîº –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
          </button>
        </div>
      </form>
    </section>

    <!-- üìä –¢–∞–±–ª–∏—Ü–∞ -->
    <div class="overflow-x-auto mb-6">
      <table class="w-full table-auto border border-gray-300 text-sm">
        <thead class="bg-gray-200">
          <tr>
            <th class="px-4 py-2 border">–£–ù–ü</th>
            <th class="px-4 py-2 border">–£—á–µ—Ç–Ω—ã–π –Ω–æ–º–µ—Ä –ö–û</th>
            <th class="px-4 py-2 border">–°–ö–ö–û</th>
            <th class="px-4 py-2 border">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
            <th class="px-4 py-2 border">–°—Å—ã–ª–∫–∞</th>
          </tr>
        </thead>
        <tbody id="results-body" class="bg-white"></tbody>
      </table>
    </div>

    <!-- ‚è≥ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã -->
    <div class="space-y-4 mb-6">
      <div>
        <label class="block mb-1 text-sm font-medium">üìÅ –ü—Ä–æ–≥—Ä–µ—Å—Å —Ñ–∞–π–ª–æ–≤</label>
        <div class="relative w-full bg-gray-200 rounded h-4 overflow-hidden">
          <div
            id="file-bar"
            class="h-full rounded bar-striped bg-gray-500 transition-all"
            style="width: 0%"
          ></div>
          <span
            id="file-label"
            class="absolute inset-0 flex items-center justify-center text-white text-xs font-semibold"
            >0%</span
          >
        </div>
      </div>
      <div>
        <label class="block mb-1 text-sm font-medium">üìÑ –ü—Ä–æ–≥—Ä–µ—Å—Å —Å—Ç—Ä–∞–Ω–∏—Ü</label>
        <div class="relative w-full bg-gray-200 rounded h-4 overflow-hidden">
          <div
            id="page-bar"
            class="h-full rounded bar-striped bg-blue-400 transition-all"
            style="width: 0%"
          ></div>
          <span
            id="page-label"
            class="absolute inset-0 flex items-center justify-center text-white text-xs font-semibold"
            >0%</span
          >
        </div>
      </div>
      <div>
        <label class="block mb-1 text-sm font-medium">üîé –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–∏—Å–∫–∞</label>
        <div class="relative w-full bg-gray-200 rounded h-4 overflow-hidden">
          <div
            id="search-bar"
            class="h-full rounded bar-striped bg-green-500 transition-all"
            style="width: 0%"
          ></div>
          <span
            id="search-label"
            class="absolute inset-0 flex items-center justify-center text-white text-xs font-semibold"
            >0%</span
          >
        </div>
      </div>
    </div>

    <!-- Hidden Index Form -->
    <form id="index-form" class="hidden"></form>
  </body>
</html>
